============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-9.0.2, pluggy-1.6.0 -- /usr/bin/python3
cachedir: .pytest_cache
rootdir: /mnt/sda1/DATA/dev/kulykiv-church-comunity-tracker
collecting ... collected 183 items

tests/test_database.py::TestConfig::test_get_missing_key_returns_default PASSED [  0%]
tests/test_database.py::TestConfig::test_get_missing_key_empty_default PASSED [  1%]
tests/test_database.py::TestConfig::test_set_and_get PASSED              [  1%]
tests/test_database.py::TestConfig::test_set_overwrites PASSED           [  2%]
tests/test_database.py::TestAddressSortKey::test_numbered_street PASSED  [  2%]
tests/test_database.py::TestAddressSortKey::test_numbered_street_casefold PASSED [  3%]
tests/test_database.py::TestAddressSortKey::test_no_number PASSED        [  3%]
tests/test_database.py::TestAddressSortKey::test_cyrillic_street PASSED  [  4%]
tests/test_database.py::TestAddressSortKey::test_strips_whitespace PASSED [  4%]
tests/test_database.py::TestAddresses::test_add_address_returns_address PASSED [  5%]
tests/test_database.py::TestAddresses::test_add_address_with_notes PASSED [  6%]
tests/test_database.py::TestAddresses::test_get_addresses_empty PASSED   [  6%]
tests/test_database.py::TestAddresses::test_get_addresses_returns_all PASSED [  7%]
tests/test_database.py::TestAddresses::test_get_addresses_sorted_naturally PASSED [  7%]
tests/test_database.py::TestAddresses::test_get_addresses_active_count PASSED [  8%]
tests/test_database.py::TestAddresses::test_update_address PASSED        [  8%]
tests/test_database.py::TestAddresses::test_delete_address PASSED        [  9%]
tests/test_database.py::TestAddresses::test_delete_address_cascades_to_residents PASSED [  9%]
tests/test_database.py::TestAddresses::test_find_or_create_address_creates_new PASSED [ 10%]
tests/test_database.py::TestAddresses::test_find_or_create_address_finds_existing PASSED [ 10%]
tests/test_database.py::TestAddresses::test_find_or_create_strips_whitespace PASSED [ 11%]
tests/test_database.py::TestResidentExists::test_returns_false_when_absent PASSED [ 12%]
tests/test_database.py::TestResidentExists::test_returns_true_when_present PASSED [ 12%]
tests/test_database.py::TestResidentExists::test_case_insensitive PASSED [ 13%]
tests/test_database.py::TestResidentExists::test_different_address_returns_false PASSED [ 13%]
tests/test_database.py::TestResidents::test_add_resident_assigns_id PASSED [ 14%]
tests/test_database.py::TestResidents::test_get_residents_returns_for_address PASSED [ 14%]
tests/test_database.py::TestResidents::test_get_residents_empty_for_unknown_address PASSED [ 15%]
tests/test_database.py::TestResidents::test_get_residents_sorted_by_name PASSED [ 15%]
tests/test_database.py::TestResidents::test_get_all_residents PASSED     [ 16%]
tests/test_database.py::TestResidents::test_update_resident PASSED       [ 16%]
tests/test_database.py::TestResidents::test_delete_resident PASSED       [ 17%]
tests/test_database.py::TestResidents::test_mark_deceased PASSED         [ 18%]
tests/test_database.py::TestResidents::test_mark_left PASSED             [ 18%]
tests/test_database.py::TestResidents::test_active_count_excludes_deceased PASSED [ 19%]
tests/test_database.py::TestResidents::test_active_count_excludes_left PASSED [ 19%]
tests/test_database.py::TestResidents::test_resident_all_fields_roundtrip PASSED [ 20%]
tests/test_database.py::TestEvents::test_add_event_assigns_id PASSED     [ 20%]
tests/test_database.py::TestEvents::test_get_events_for_address PASSED   [ 21%]
tests/test_database.py::TestEvents::test_get_events_includes_resident_name PASSED [ 21%]
tests/test_database.py::TestEvents::test_get_events_sorted_by_date_desc PASSED [ 22%]
tests/test_database.py::TestEvents::test_get_events_empty_for_unknown_address PASSED [ 22%]
tests/test_database.py::TestEvents::test_delete_resident_cascades_to_events PASSED [ 23%]
tests/test_export.py::TestCellHelper::test_returns_value_at_index PASSED [ 24%]
tests/test_export.py::TestCellHelper::test_strips_whitespace PASSED      [ 24%]
tests/test_export.py::TestCellHelper::test_out_of_bounds_returns_default PASSED [ 25%]
tests/test_export.py::TestCellHelper::test_out_of_bounds_custom_default PASSED [ 25%]
tests/test_export.py::TestCellHelper::test_converts_non_string PASSED    [ 26%]
tests/test_export.py::TestDateOrNone::test_returns_value_when_present PASSED [ 26%]
tests/test_export.py::TestDateOrNone::test_returns_none_for_empty_string PASSED [ 27%]
tests/test_export.py::TestDateOrNone::test_returns_none_out_of_bounds PASSED [ 27%]
tests/test_export.py::TestResidentRow::test_active_status_label PASSED   [ 28%]
tests/test_export.py::TestResidentRow::test_deceased_status_label PASSED [ 28%]
tests/test_export.py::TestResidentRow::test_left_status_label PASSED     [ 29%]
tests/test_export.py::TestResidentRow::test_ukrainian_status_deceased PASSED [ 30%]
tests/test_export.py::TestResidentRow::test_date_fields_empty_when_none PASSED [ 30%]
tests/test_export.py::TestResidentRow::test_date_fields_populated PASSED [ 31%]
tests/test_export.py::TestResidentRow::test_name_fields PASSED           [ 31%]
tests/test_export.py::TestExportCsv::test_header_row_present PASSED      [ 32%]
tests/test_export.py::TestExportCsv::test_data_row_count PASSED          [ 32%]
tests/test_export.py::TestExportCsv::test_data_sorted_by_last_then_first PASSED [ 33%]
tests/test_export.py::TestExportCsv::test_clears_address_cache_before_export PASSED [ 33%]
tests/test_export.py::TestImportRows::test_skips_empty_rows PASSED       [ 34%]
tests/test_export.py::TestImportRows::test_skips_rows_with_missing_fields PASSED [ 34%]
tests/test_export.py::TestImportRows::test_imports_new_resident PASSED   [ 35%]
tests/test_export.py::TestImportRows::test_skips_duplicate_resident PASSED [ 36%]
tests/test_export.py::TestImportRows::test_status_mapping_ukrainian PASSED [ 36%]
tests/test_export.py::TestImportRows::test_status_mapping_deceased PASSED [ 37%]
tests/test_export.py::TestImportRows::test_unknown_status_defaults_to_active PASSED [ 37%]
tests/test_export.py::TestCsvRoundTrip::test_export_then_import PASSED   [ 38%]
tests/test_export.py::TestExportExcel::test_creates_xlsx_file PASSED     [ 38%]
tests/test_export.py::TestExportExcel::test_header_row_present PASSED    [ 39%]
tests/test_export.py::TestExportExcel::test_header_is_bold PASSED        [ 39%]
tests/test_export.py::TestExportExcel::test_data_row_count PASSED        [ 40%]
tests/test_export.py::TestExportExcel::test_empty_residents_only_header PASSED [ 40%]
tests/test_export.py::TestExportExcel::test_data_sorted_by_last_then_first PASSED [ 41%]
tests/test_export.py::TestExportExcel::test_date_fields_written PASSED   [ 42%]
tests/test_export.py::TestExportExcel::test_clears_address_cache_before_export PASSED [ 42%]
tests/test_export.py::TestExportExcel::test_raises_runtime_error_without_openpyxl PASSED [ 43%]
tests/test_export.py::TestImportExcel::test_raises_runtime_error_without_openpyxl PASSED [ 43%]
tests/test_export.py::TestImportExcel::test_skips_header_row PASSED      [ 44%]
tests/test_export.py::TestImportExcel::test_imports_new_resident PASSED  [ 44%]
tests/test_export.py::TestImportExcel::test_skips_duplicate_resident PASSED [ 45%]
tests/test_export.py::TestImportExcel::test_date_fields_imported PASSED  [ 45%]
tests/test_export.py::TestImportExcel::test_status_mapping_ukrainian PASSED [ 46%]
tests/test_export.py::TestImportExcel::test_status_mapping_deceased PASSED [ 46%]
tests/test_export.py::TestImportExcel::test_status_mapping_left_ukrainian PASSED [ 47%]
tests/test_export.py::TestImportExcel::test_unknown_status_defaults_to_active PASSED [ 48%]
tests/test_export.py::TestImportExcel::test_skips_rows_with_missing_fields PASSED [ 48%]
tests/test_export.py::TestExcelRoundTrip::test_export_then_import PASSED [ 49%]
tests/test_lang.py::TestSetLang::test_set_english PASSED                 [ 49%]
tests/test_lang.py::TestSetLang::test_set_ukrainian PASSED               [ 50%]
tests/test_lang.py::TestSetLang::test_invalid_lang_ignored PASSED        [ 50%]
tests/test_lang.py::TestSetLang::test_empty_string_ignored PASSED        [ 51%]
tests/test_lang.py::TestGet::test_known_key_english PASSED               [ 51%]
tests/test_lang.py::TestGet::test_known_key_ukrainian PASSED             [ 52%]
tests/test_lang.py::TestGet::test_missing_key_returns_bracket_form PASSED [ 53%]
tests/test_lang.py::TestGet::test_format_substitution PASSED             [ 53%]
tests/test_lang.py::TestGet::test_format_substitution_ukrainian PASSED   [ 54%]
tests/test_lang.py::TestGet::test_no_kwargs_returns_plain_string PASSED  [ 54%]
tests/test_lang.py::TestGet::test_about_text_multiline PASSED            [ 55%]
tests/test_lang.py::TestGet::test_app_title_english PASSED               [ 55%]
tests/test_lang.py::TestGet::test_app_title_ukrainian_differs_from_english PASSED [ 56%]
tests/test_lang.py::TestEventTypes::test_returns_four_items_en PASSED    [ 56%]
tests/test_lang.py::TestEventTypes::test_returns_four_items_uk PASSED    [ 57%]
tests/test_lang.py::TestEventTypes::test_english_event_types PASSED      [ 57%]
tests/test_lang.py::TestEventTypes::test_ukrainian_event_types PASSED    [ 58%]
tests/test_lang.py::TestEventTypeToKey::test_english_localized_to_key PASSED [ 59%]
tests/test_lang.py::TestEventTypeToKey::test_ukrainian_localized_to_key PASSED [ 59%]
tests/test_lang.py::TestEventTypeToKey::test_bare_english_key_passthrough PASSED [ 60%]
tests/test_lang.py::TestEventTypeToKey::test_unknown_returns_itself PASSED [ 60%]
tests/test_lang.py::TestEventKeyToLabel::test_english_labels PASSED      [ 61%]
tests/test_lang.py::TestEventKeyToLabel::test_ukrainian_labels PASSED    [ 61%]
tests/test_lang.py::TestEventKeyToLabel::test_unknown_key_passthrough PASSED [ 62%]
tests/test_models.py::TestAddress::test_basic_creation PASSED            [ 62%]
tests/test_models.py::TestAddress::test_with_all_fields PASSED           [ 63%]
tests/test_models.py::TestAddress::test_id_can_be_none PASSED            [ 63%]
tests/test_models.py::TestResident::test_full_name PASSED                [ 64%]
tests/test_models.py::TestResident::test_is_baptized_true PASSED         [ 65%]
tests/test_models.py::TestResident::test_is_baptized_false PASSED        [ 65%]
tests/test_models.py::TestResident::test_is_married_via_date PASSED      [ 66%]
tests/test_models.py::TestResident::test_is_married_via_spouse PASSED    [ 66%]
tests/test_models.py::TestResident::test_is_married_neither PASSED       [ 67%]
tests/test_models.py::TestResident::test_is_married_empty_spouse PASSED  [ 67%]
tests/test_models.py::TestResident::test_default_status PASSED           [ 68%]
tests/test_models.py::TestResident::test_all_optional_fields_default_none PASSED [ 68%]
tests/test_models.py::TestResident::test_notes_default_empty PASSED      [ 69%]
tests/test_models.py::TestEvent::test_basic_creation PASSED              [ 69%]
tests/test_models.py::TestEvent::test_with_all_fields PASSED             [ 70%]
tests/test_models.py::TestEvent::test_id_can_be_none PASSED              [ 71%]
tests/test_transliterate.py::TestUkToEn::test_simple_vowels_lowercase PASSED [ 71%]
tests/test_transliterate.py::TestUkToEn::test_simple_vowels_uppercase PASSED [ 72%]
tests/test_transliterate.py::TestUkToEn::test_ye_vowel_lowercase PASSED  [ 72%]
tests/test_transliterate.py::TestUkToEn::test_ye_vowel_uppercase PASSED  [ 73%]
tests/test_transliterate.py::TestUkToEn::test_yi_vowel_lowercase PASSED  [ 73%]
tests/test_transliterate.py::TestUkToEn::test_yi_vowel_uppercase PASSED  [ 74%]
tests/test_transliterate.py::TestUkToEn::test_yu_vowel PASSED            [ 74%]
tests/test_transliterate.py::TestUkToEn::test_ya_vowel PASSED            [ 75%]
tests/test_transliterate.py::TestUkToEn::test_y_vowel PASSED             [ 75%]
tests/test_transliterate.py::TestUkToEn::test_i_vowel PASSED             [ 76%]
tests/test_transliterate.py::TestUkToEn::test_simple_consonants_lowercase PASSED [ 77%]
tests/test_transliterate.py::TestUkToEn::test_simple_consonants_uppercase PASSED [ 77%]
tests/test_transliterate.py::TestUkToEn::test_digraph_zh PASSED          [ 78%]
tests/test_transliterate.py::TestUkToEn::test_digraph_kh PASSED          [ 78%]
tests/test_transliterate.py::TestUkToEn::test_digraph_ts PASSED          [ 79%]
tests/test_transliterate.py::TestUkToEn::test_digraph_ch PASSED          [ 79%]
tests/test_transliterate.py::TestUkToEn::test_digraph_sh PASSED          [ 80%]
tests/test_transliterate.py::TestUkToEn::test_digraph_shch PASSED        [ 80%]
tests/test_transliterate.py::TestUkToEn::test_soft_sign_produces_empty_string PASSED [ 81%]
tests/test_transliterate.py::TestUkToEn::test_y_consonant PASSED         [ 81%]
tests/test_transliterate.py::TestUkToEn::test_word_ivan PASSED           [ 82%]
tests/test_transliterate.py::TestUkToEn::test_word_shevchenko PASSED     [ 83%]
tests/test_transliterate.py::TestUkToEn::test_word_koval PASSED          [ 83%]
tests/test_transliterate.py::TestUkToEn::test_word_kulykiv PASSED        [ 84%]
tests/test_transliterate.py::TestUkToEn::test_word_bohorodytsia PASSED   [ 84%]
tests/test_transliterate.py::TestUkToEn::test_latin_passthrough PASSED   [ 85%]
tests/test_transliterate.py::TestUkToEn::test_digits_passthrough PASSED  [ 85%]
tests/test_transliterate.py::TestUkToEn::test_spaces_passthrough PASSED  [ 86%]
tests/test_transliterate.py::TestUkToEn::test_street_name_with_number PASSED [ 86%]
tests/test_transliterate.py::TestUkToEn::test_empty_string PASSED        [ 87%]
tests/test_transliterate.py::TestUkToEn::test_mixed_scripts PASSED       [ 87%]
tests/test_transliterate.py::TestNormalizeForSearch::test_ukrainian_lowercased PASSED [ 88%]
tests/test_transliterate.py::TestNormalizeForSearch::test_latin_lowercased PASSED [ 89%]
tests/test_transliterate.py::TestNormalizeForSearch::test_cyrillic_uppercase_lowercased PASSED [ 89%]
tests/test_transliterate.py::TestNormalizeForSearch::test_latin_uppercase_lowercased PASSED [ 90%]
tests/test_transliterate.py::TestNormalizeForSearch::test_shevchenko PASSED [ 90%]
tests/test_transliterate.py::TestNormalizeForSearch::test_empty_string PASSED [ 91%]
tests/test_transliterate.py::TestNormalizeForSearch::test_spaces_preserved PASSED [ 91%]
tests/test_transliterate.py::TestNormalizeForSearch::test_cross_script_match[ivan-\u0406\u0432\u0430\u043d \u041a\u043e\u0432\u0430\u043b\u044c] PASSED [ 92%]
tests/test_transliterate.py::TestNormalizeForSearch::test_cross_script_match[\u0406\u0432\u0430\u043d-Ivan Koval] PASSED [ 92%]
tests/test_transliterate.py::TestNormalizeForSearch::test_cross_script_match[koval-\u041a\u043e\u0432\u0430\u043b\u044c \u0406\u0432\u0430\u043d] PASSED [ 93%]
tests/test_transliterate.py::TestNormalizeForSearch::test_cross_script_match[\u041a\u043e\u0432\u0430\u043b\u044c-Koval Ivan] PASSED [ 93%]
tests/test_transliterate.py::TestNormalizeForSearch::test_cross_script_match[shevch-\u0428\u0435\u0432\u0447\u0435\u043d\u043a\u043e \u0422\u0430\u0440\u0430\u0441] PASSED [ 94%]
tests/test_transliterate.py::TestNormalizeForSearch::test_cross_script_match[\u0448\u0435\u0432\u0447-Shevchenko Taras] PASSED [ 95%]
tests/test_transliterate.py::TestNormalizeForSearch::test_cross_script_match[ivan-\u0406\u0432\u0430\u043d \u0428\u0435\u0432\u0447\u0435\u043d\u043a\u043e] PASSED [ 95%]
tests/test_transliterate.py::TestNormalizeForSearch::test_cross_script_match[taras-\u0422\u0430\u0440\u0430\u0441 \u0428\u0435\u0432\u0447\u0435\u043d\u043a\u043e] PASSED [ 96%]
tests/test_transliterate.py::TestNormalizeForSearch::test_cross_script_no_match[petro-\u0406\u0432\u0430\u043d \u041a\u043e\u0432\u0430\u043b\u044c] PASSED [ 96%]
tests/test_transliterate.py::TestNormalizeForSearch::test_cross_script_no_match[\u041f\u0435\u0442\u0440\u043e-Ivan Koval] PASSED [ 97%]
tests/test_transliterate.py::TestNormalizeForSearch::test_cross_script_no_match[xyz-\u0428\u0435\u0432\u0447\u0435\u043d\u043a\u043e \u0422\u0430\u0440\u0430\u0441] PASSED [ 97%]
tests/test_transliterate.py::TestNormalizeForSearch::test_both_scripts_produce_same_result PASSED [ 98%]
tests/test_transliterate.py::TestNormalizeForSearch::test_address_search_cyrillic_query PASSED [ 98%]
tests/test_transliterate.py::TestNormalizeForSearch::test_address_search_latin_query PASSED [ 99%]
tests/test_transliterate.py::TestNormalizeForSearch::test_soft_sign_transparent_in_search PASSED [100%]

============================= 183 passed in 4.64s ==============================
