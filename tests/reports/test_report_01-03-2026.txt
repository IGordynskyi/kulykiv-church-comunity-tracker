============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-9.0.2, pluggy-1.6.0 -- /usr/bin/python3
cachedir: .pytest_cache
rootdir: /mnt/sda1/DATA/dev/kulykiv-church-comunity-tracker
collecting ... collected 130 items

tests/test_database.py::TestConfig::test_get_missing_key_returns_default PASSED [  0%]
tests/test_database.py::TestConfig::test_get_missing_key_empty_default PASSED [  1%]
tests/test_database.py::TestConfig::test_set_and_get PASSED              [  2%]
tests/test_database.py::TestConfig::test_set_overwrites PASSED           [  3%]
tests/test_database.py::TestAddressSortKey::test_numbered_street PASSED  [  3%]
tests/test_database.py::TestAddressSortKey::test_numbered_street_casefold PASSED [  4%]
tests/test_database.py::TestAddressSortKey::test_no_number PASSED        [  5%]
tests/test_database.py::TestAddressSortKey::test_cyrillic_street PASSED  [  6%]
tests/test_database.py::TestAddressSortKey::test_strips_whitespace PASSED [  6%]
tests/test_database.py::TestAddresses::test_add_address_returns_address PASSED [  7%]
tests/test_database.py::TestAddresses::test_add_address_with_notes PASSED [  8%]
tests/test_database.py::TestAddresses::test_get_addresses_empty PASSED   [  9%]
tests/test_database.py::TestAddresses::test_get_addresses_returns_all PASSED [ 10%]
tests/test_database.py::TestAddresses::test_get_addresses_sorted_naturally PASSED [ 10%]
tests/test_database.py::TestAddresses::test_get_addresses_active_count PASSED [ 11%]
tests/test_database.py::TestAddresses::test_update_address PASSED        [ 12%]
tests/test_database.py::TestAddresses::test_delete_address PASSED        [ 13%]
tests/test_database.py::TestAddresses::test_delete_address_cascades_to_residents PASSED [ 13%]
tests/test_database.py::TestAddresses::test_find_or_create_address_creates_new PASSED [ 14%]
tests/test_database.py::TestAddresses::test_find_or_create_address_finds_existing PASSED [ 15%]
tests/test_database.py::TestAddresses::test_find_or_create_strips_whitespace PASSED [ 16%]
tests/test_database.py::TestResidentExists::test_returns_false_when_absent PASSED [ 16%]
tests/test_database.py::TestResidentExists::test_returns_true_when_present PASSED [ 17%]
tests/test_database.py::TestResidentExists::test_case_insensitive PASSED [ 18%]
tests/test_database.py::TestResidentExists::test_different_address_returns_false PASSED [ 19%]
tests/test_database.py::TestResidents::test_add_resident_assigns_id PASSED [ 20%]
tests/test_database.py::TestResidents::test_get_residents_returns_for_address PASSED [ 20%]
tests/test_database.py::TestResidents::test_get_residents_empty_for_unknown_address PASSED [ 21%]
tests/test_database.py::TestResidents::test_get_residents_sorted_by_name PASSED [ 22%]
tests/test_database.py::TestResidents::test_get_all_residents PASSED     [ 23%]
tests/test_database.py::TestResidents::test_update_resident PASSED       [ 23%]
tests/test_database.py::TestResidents::test_delete_resident PASSED       [ 24%]
tests/test_database.py::TestResidents::test_mark_deceased PASSED         [ 25%]
tests/test_database.py::TestResidents::test_mark_left PASSED             [ 26%]
tests/test_database.py::TestResidents::test_active_count_excludes_deceased PASSED [ 26%]
tests/test_database.py::TestResidents::test_active_count_excludes_left PASSED [ 27%]
tests/test_database.py::TestResidents::test_resident_all_fields_roundtrip PASSED [ 28%]
tests/test_database.py::TestEvents::test_add_event_assigns_id PASSED     [ 29%]
tests/test_database.py::TestEvents::test_get_events_for_address PASSED   [ 30%]
tests/test_database.py::TestEvents::test_get_events_includes_resident_name PASSED [ 30%]
tests/test_database.py::TestEvents::test_get_events_sorted_by_date_desc PASSED [ 31%]
tests/test_database.py::TestEvents::test_get_events_empty_for_unknown_address PASSED [ 32%]
tests/test_database.py::TestEvents::test_delete_resident_cascades_to_events PASSED [ 33%]
tests/test_export.py::TestCellHelper::test_returns_value_at_index PASSED [ 33%]
tests/test_export.py::TestCellHelper::test_strips_whitespace PASSED      [ 34%]
tests/test_export.py::TestCellHelper::test_out_of_bounds_returns_default PASSED [ 35%]
tests/test_export.py::TestCellHelper::test_out_of_bounds_custom_default PASSED [ 36%]
tests/test_export.py::TestCellHelper::test_converts_non_string PASSED    [ 36%]
tests/test_export.py::TestDateOrNone::test_returns_value_when_present PASSED [ 37%]
tests/test_export.py::TestDateOrNone::test_returns_none_for_empty_string PASSED [ 38%]
tests/test_export.py::TestDateOrNone::test_returns_none_out_of_bounds PASSED [ 39%]
tests/test_export.py::TestResidentRow::test_active_status_label PASSED   [ 40%]
tests/test_export.py::TestResidentRow::test_deceased_status_label PASSED [ 40%]
tests/test_export.py::TestResidentRow::test_left_status_label PASSED     [ 41%]
tests/test_export.py::TestResidentRow::test_ukrainian_status_deceased PASSED [ 42%]
tests/test_export.py::TestResidentRow::test_date_fields_empty_when_none PASSED [ 43%]
tests/test_export.py::TestResidentRow::test_date_fields_populated PASSED [ 43%]
tests/test_export.py::TestResidentRow::test_name_fields PASSED           [ 44%]
tests/test_export.py::TestExportCsv::test_header_row_present PASSED      [ 45%]
tests/test_export.py::TestExportCsv::test_data_row_count PASSED          [ 46%]
tests/test_export.py::TestExportCsv::test_data_sorted_by_last_then_first PASSED [ 46%]
tests/test_export.py::TestExportCsv::test_clears_address_cache_before_export PASSED [ 47%]
tests/test_export.py::TestImportRows::test_skips_empty_rows PASSED       [ 48%]
tests/test_export.py::TestImportRows::test_skips_rows_with_missing_fields PASSED [ 49%]
tests/test_export.py::TestImportRows::test_imports_new_resident PASSED   [ 50%]
tests/test_export.py::TestImportRows::test_skips_duplicate_resident PASSED [ 50%]
tests/test_export.py::TestImportRows::test_status_mapping_ukrainian PASSED [ 51%]
tests/test_export.py::TestImportRows::test_status_mapping_deceased PASSED [ 52%]
tests/test_export.py::TestImportRows::test_unknown_status_defaults_to_active PASSED [ 53%]
tests/test_export.py::TestCsvRoundTrip::test_export_then_import PASSED   [ 53%]
tests/test_export.py::TestExportExcel::test_creates_xlsx_file PASSED     [ 54%]
tests/test_export.py::TestExportExcel::test_header_row_present PASSED    [ 55%]
tests/test_export.py::TestExportExcel::test_header_is_bold PASSED        [ 56%]
tests/test_export.py::TestExportExcel::test_data_row_count PASSED        [ 56%]
tests/test_export.py::TestExportExcel::test_empty_residents_only_header PASSED [ 57%]
tests/test_export.py::TestExportExcel::test_data_sorted_by_last_then_first PASSED [ 58%]
tests/test_export.py::TestExportExcel::test_date_fields_written PASSED   [ 59%]
tests/test_export.py::TestExportExcel::test_clears_address_cache_before_export PASSED [ 60%]
tests/test_export.py::TestExportExcel::test_raises_runtime_error_without_openpyxl PASSED [ 60%]
tests/test_export.py::TestImportExcel::test_raises_runtime_error_without_openpyxl PASSED [ 61%]
tests/test_export.py::TestImportExcel::test_skips_header_row PASSED      [ 62%]
tests/test_export.py::TestImportExcel::test_imports_new_resident PASSED  [ 63%]
tests/test_export.py::TestImportExcel::test_skips_duplicate_resident PASSED [ 63%]
tests/test_export.py::TestImportExcel::test_date_fields_imported PASSED  [ 64%]
tests/test_export.py::TestImportExcel::test_status_mapping_ukrainian PASSED [ 65%]
tests/test_export.py::TestImportExcel::test_status_mapping_deceased PASSED [ 66%]
tests/test_export.py::TestImportExcel::test_status_mapping_left_ukrainian PASSED [ 66%]
tests/test_export.py::TestImportExcel::test_unknown_status_defaults_to_active PASSED [ 67%]
tests/test_export.py::TestImportExcel::test_skips_rows_with_missing_fields PASSED [ 68%]
tests/test_export.py::TestExcelRoundTrip::test_export_then_import PASSED [ 69%]
tests/test_lang.py::TestSetLang::test_set_english PASSED                 [ 70%]
tests/test_lang.py::TestSetLang::test_set_ukrainian PASSED               [ 70%]
tests/test_lang.py::TestSetLang::test_invalid_lang_ignored PASSED        [ 71%]
tests/test_lang.py::TestSetLang::test_empty_string_ignored PASSED        [ 72%]
tests/test_lang.py::TestGet::test_known_key_english PASSED               [ 73%]
tests/test_lang.py::TestGet::test_known_key_ukrainian PASSED             [ 73%]
tests/test_lang.py::TestGet::test_missing_key_returns_bracket_form PASSED [ 74%]
tests/test_lang.py::TestGet::test_format_substitution PASSED             [ 75%]
tests/test_lang.py::TestGet::test_format_substitution_ukrainian PASSED   [ 76%]
tests/test_lang.py::TestGet::test_no_kwargs_returns_plain_string PASSED  [ 76%]
tests/test_lang.py::TestGet::test_about_text_multiline PASSED            [ 77%]
tests/test_lang.py::TestGet::test_app_title_english PASSED               [ 78%]
tests/test_lang.py::TestGet::test_app_title_ukrainian_differs_from_english PASSED [ 79%]
tests/test_lang.py::TestEventTypes::test_returns_four_items_en PASSED    [ 80%]
tests/test_lang.py::TestEventTypes::test_returns_four_items_uk PASSED    [ 80%]
tests/test_lang.py::TestEventTypes::test_english_event_types PASSED      [ 81%]
tests/test_lang.py::TestEventTypes::test_ukrainian_event_types PASSED    [ 82%]
tests/test_lang.py::TestEventTypeToKey::test_english_localized_to_key PASSED [ 83%]
tests/test_lang.py::TestEventTypeToKey::test_ukrainian_localized_to_key PASSED [ 83%]
tests/test_lang.py::TestEventTypeToKey::test_bare_english_key_passthrough PASSED [ 84%]
tests/test_lang.py::TestEventTypeToKey::test_unknown_returns_itself PASSED [ 85%]
tests/test_lang.py::TestEventKeyToLabel::test_english_labels PASSED      [ 86%]
tests/test_lang.py::TestEventKeyToLabel::test_ukrainian_labels PASSED    [ 86%]
tests/test_lang.py::TestEventKeyToLabel::test_unknown_key_passthrough PASSED [ 87%]
tests/test_models.py::TestAddress::test_basic_creation PASSED            [ 88%]
tests/test_models.py::TestAddress::test_with_all_fields PASSED           [ 89%]
tests/test_models.py::TestAddress::test_id_can_be_none PASSED            [ 90%]
tests/test_models.py::TestResident::test_full_name PASSED                [ 90%]
tests/test_models.py::TestResident::test_is_baptized_true PASSED         [ 91%]
tests/test_models.py::TestResident::test_is_baptized_false PASSED        [ 92%]
tests/test_models.py::TestResident::test_is_married_via_date PASSED      [ 93%]
tests/test_models.py::TestResident::test_is_married_via_spouse PASSED    [ 93%]
tests/test_models.py::TestResident::test_is_married_neither PASSED       [ 94%]
tests/test_models.py::TestResident::test_is_married_empty_spouse PASSED  [ 95%]
tests/test_models.py::TestResident::test_default_status PASSED           [ 96%]
tests/test_models.py::TestResident::test_all_optional_fields_default_none PASSED [ 96%]
tests/test_models.py::TestResident::test_notes_default_empty PASSED      [ 97%]
tests/test_models.py::TestEvent::test_basic_creation PASSED              [ 98%]
tests/test_models.py::TestEvent::test_with_all_fields PASSED             [ 99%]
tests/test_models.py::TestEvent::test_id_can_be_none PASSED              [100%]

=============================== warnings summary ===============================
tests/test_export.py::TestExportExcel::test_header_row_present
  /home/yuriih/.local/lib/python3.10/site-packages/openpyxl/compat/numbers.py:9: UserWarning: The NumPy module was reloaded (imported a second time). This can in some cases result in small but subtle issues and is discouraged.
    import numpy

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
======================== 130 passed, 1 warning in 3.56s ========================
